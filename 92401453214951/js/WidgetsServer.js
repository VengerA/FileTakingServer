function getStyle(a,b){var c,d=(a.ownerDocument||document).defaultView;return d&&d.getComputedStyle?(b=b.replace(/([A-Z])/g,"-$1").toLowerCase(),d.getComputedStyle(a,null).getPropertyValue(b)):a.currentStyle?(b=b.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),c=a.currentStyle[b],/^\d+(em|pt|%|ex)?$/i.test(c)?function(b){var c=a.style.left,d=a.runtimeStyle.left;return a.runtimeStyle.left=a.currentStyle.left,a.style.left=b||0,b=a.style.pixelLeft+"px",a.style.left=c,a.runtimeStyle.left=d,b}(c):c):void 0}function getIframeWindow(a){var b;return a.contentWindow?a.contentWindow:a.window?a.window:(!b&&a.contentDocument&&(b=a.contentDocument),!b&&a.document&&(b=a.document),b&&b.defaultView?b.defaultView:b&&b.parentWindow?b.parentWindow:void 0)}function widgetAutoFill(){function a(a){var b=!!window.CardForm;$H(a).each(function(a){var d=a.key,e=a.value;try{switch(e.type){case"control_scale":case"control_radio":if(void 0==e.name)var f=$$("#id_"+d+' input[type="radio"]');else var f=document.getElementsByName("q"+d+"_"+("control_radio"==e.type||"control_scale"==e.type?e.name:d));$A(f).each(function(a){a.value===e.value?(a.checked=!0,a.writeAttribute("checked","checked"),c(a,"click"),a.checked=!0):null!=e.items.other&&($("other_"+d).checked=!0,$("other_"+d).writeAttribute("checked","checked"),$("input_"+d).value=e.items.other,c($("input_"+d),"click"),$("input_"+d).checked=!0)});break;case"control_checkbox":var g=$$("#id_"+d+' input[type="checkbox"]');$A(g).each(function(a){a.checked=!1,a.removeAttribute("checked"),"[object Array]"===Object.prototype.toString.call(e.items)?e.items.include(a.value)&&(a.checked=!0,a.writeAttribute("checked","checked"),c(a,"click"),a.checked=!0):Object.values(e.items).include(a.value)?(a.checked=!0,a.writeAttribute("checked","checked"),c(a,"click"),a.checked=!0):null!=e.items.other&&($("other_"+d).checked=!0,$("other_"+d).writeAttribute("checked","checked"),$("input_"+d).disabled=!1,$("input_"+d).value=e.items.other,c($("input_"+d),"click"),$("input_"+d).checked=!0)});break;case"control_yesno":var h=$$("#id_"+d+' input[type="radio"]');$A(h).each(function(a){a.value===e.value&&(a.checked=!0,a.writeAttribute("checked","checked"),c(a,"click"),a.checked=!0)});break;case"control_dropdown":var i=$("input_"+d);if(i){if(b){var j=i.up().querySelector("div.jfInput-dropdown").classList.contains("isMultiple");if(j){var k=e.items[0].split(",");k.forEach(function(a){i.querySelector('option[value="'+a+'"]').selected=!0})}else i.putValue(e.value)}else if(i.hasAttribute("multiple")){var l=$$("#id_"+d+" option");$A(l).each(function(a){e.items.include(a.value)&&(a.selected=!0)})}else i.putValue(e.value);i.triggerEvent("change")}break;case"control_rating":if(b){var m=document.getElementById("input_"+d+"_"+e.value);m.checked=!0}else $("input_"+d)&&$("input_"+d).setRating(e.value);break;case"control_datetime":case"control_fullname":if($H(e.items).each(function(a){$(a.key+"_"+d)&&($(a.key+"_"+d).value=a.value||"",$(a.key+"_"+d).triggerEvent("change"))}),$("lite_mode_"+d)){var n=e.items;"year"in n&&"month"in n&&"day"in n&&""!==n.year&&""!==n.month&&""!==n.day&&JotForm.formatDate({date:new Date(n.year,n.month-1,n.day),dateField:$("id_"+d)})}break;case"control_emojislider":for(var o,p=document.getElementById("cid_"+d),h=p.querySelectorAll("input[type=radio]"),q=0,r=0;o=h[r];r++)o.value===e.value&&(o.checked=!0,q=r);var s=p.querySelector(".js-emojiSlider");s.addClassName("isFilled");var t=s.querySelectorAll(".js-emojiScaleSep"),u=t[q].getAttribute("data-scale"),v=s.querySelector(".js-emojiSlider-faceList");v.style.width=u+"%";var w=v.querySelectorAll(".js-emojiFaces");w.forEach(function(a){a.removeClassName("isVisible")}),w[q].addClassName("isVisible");break;case"control_phone":case"control_birthdate":case"control_address":case"control_time":$H(e.items).each(function(a){$("input_"+d+"_"+a.key)&&$("input_"+d+"_"+a.key).putValue(a.value)}),"control_time"===e.type&&$("input_"+d+"_hourSelect")&&$("input_"+d+"_hourSelect").triggerEvent&&$("input_"+d+"_hourSelect").triggerEvent("change");break;case"control_email":var x=$("input_"+d);if(x){x.putValue(e.value),x.triggerEvent("change");var y=$("input_"+d+"_confirm");y&&(y.putValue(e.value),y.triggerEvent("change"))}break;case"control_textarea":if(e.value.length>0){var z=$("input_"+d);z.up("div").down(".nicEdit-main")&&nicEditors&&nicEditors.findEditor("input_"+d)&&nicEditors.findEditor("input_"+d).setContent(e.value),z.putValue(e.value),isCardform&&Array.prototype.forEach.call(CardForm.cards,function(a){a.question.id===d&&a.markdownEditor&&a.markdownEditor.setHtmlFromMarkdown&&a.markdownEditor.setHtmlFromMarkdown()}),z.hasClassName("form-custom-hint")&&(z.removeClassName("form-custom-hint").removeAttribute("spellcheck"),z.hasContent=!0,z.run("focus"))}else z.hasClassName("form-custom-hint")&&z.run("blur");break;default:$("input_"+d)&&($("input_"+d).putValue(e.value),$("input_"+d).triggerEvent("change"))}}catch(A){}})}function b(a){a.forEach(function(a){var b=a.qid,d=$("input_"+b),e=a.type;switch(e){case"control_scale":case"control_radio":var f=$$("#id_"+b+' input[type="radio"]');$A(f).each(function(a){a.checked=!1,a.removeAttribute("checked"),c(a,"click")});break;case"control_checkbox":var g=$$("#id_"+b+' input[type="checkbox"]');$A(g).each(function(a){a.checked=!1,a.removeAttribute("checked"),c(a,"click")});break;case"control_yesno":break;case"control_rating":break;case"control_datetime":case"control_fullname":$$("input[id*=_"+b+"]").each(function(a){a.putValue("")});break;case"control_emojislider":break;case"control_phone":case"control_birthdate":case"control_address":case"control_time":$$("[id*=input_"+b+"]").each(function(a){a.putValue("")}),"control_time"===e&&$("input_"+b+"_hourSelect")&&$("input_"+b+"_hourSelect").triggerEvent&&$("input_"+b+"_hourSelect").triggerEvent("change");break;case"control_email":case"control_textarea":case"control_dropdown":default:if(d&&(d.putValue(""),d.triggerEvent("change"),"control_email"===e)){var h=$("input_"+b+"_confirm");h&&(h.putValue(""),h.triggerEvent("change"))}}})}function c(a,b){if(a.type&&a.type.match(/checkbox|radio/)){var c=window.scrollX,d=window.scrollY;return a.triggerEvent(b),d!==window.scrollY&&window.scrollTo(c,d),void 0}a.triggerEvent(b)}function d(a,b){var c={};switch(b+="",a){case"control_fullname":var d=b.split(/\s+/g);c={first:d[0],last:d[1]},3==d.length&&(c.middle=d[1],c.last=d[2]);break;case"control_checkbox":case"control_dropdown":c=b.split(/\r\n|\r|\n|\,|\<br\>/g);break;case"control_phone":var e=b.split(/\s+/g);c={area:e[0],phone:e[1],full:b};break;case"control_time":if(/^([0]?\d|[1][0-2]):([0-5]\d)\s?(?:AM|PM)$/.test(b)){var f=b.split(" ");if(f.length>0){var g=f[0].split(":");c={ampm:f[1],hourSelect:g[0],minuteSelect:g[1]}}}}return c}return{parse:a,clear:b,generateCtrlItems:d}}function widgetFrameLoaded(a){function b(){var a=navigator.userAgent.match(/(?:MSIE |Trident\/.*; rv:)(\d+)/);return a?parseInt(a[1]):void 0}function c(){return JotForm.validateAll()&&0===$$(".form-line-error").length}function d(a){try{JSON.parse(a)}catch(b){return!1}return!0}function e(a){if(null==a)return!0;if(a.constructor===Array||a.constructor===String)return 0===a.length;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function f(a){return 8===b()?a.replace(/^\s+|\s+$/g,""):a.trim()}function g(a){var b=!1,c=document.getElementById("customFieldFrame_"+a);if(c.hasAttribute("data-type")){var d=c.readAttribute("data-type");"oembed"===d&&(b=!0)}return b}function h(a,c,d){var e=v;void 0!==d&&(e=d);var f=document.getElementById("customFieldFrame_"+c);null!==f&&(-1!=navigator.userAgent.indexOf("Firefox")?XD.postMessage(a,e,getIframeWindow(f)):void 0!==b()?XD.postMessage(a,e,f):XD.postMessage(a,e,getIframeWindow(f)))}function i(){var b=document.getElementById("widget_settings_"+a);return b?b.value:null}function j(a,b){var c=null;return function(){var d=this,e=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(d,e)},b)}}function k(a){var b=document.getElementById("input_"+a);return b&&b.hasClassName("widget-static")?!0:!1}function l(a){var b=document.getElementById("id_"+a).className;return b.indexOf("jf-required")>-1}function m(a){var b=document.getElementById("customFieldFrame_"+a);return b.hasClassName("frame-ready")||b.retrieve("frame-ready")?!0:!1}function n(a){function b(a,b){$(document.getElementById("customFieldFrame_"+a)).addClassName("frame-ready").store("frame-ready",!0),h(JSON.stringify(b),a)}var c=document.querySelector(".form-all"),d=window.getComputedStyle?window.getComputedStyle(c,null).getPropertyValue("background-color"):getStyle(c,"background"),e=window.getComputedStyle?window.getComputedStyle(c,null).getPropertyValue("font-family"):getStyle(c,"font-family"),f="cardform"==window.FORM_MODE||"card"===window.buildermode,g={type:"ready",qid:a+"",formID:document.getElementsByName("formID")[0].value,required:l(a),"static":k(a),jotformNext:window.location.href.indexOf("jotformNext=1")>-1||1==window.isComingFromJotFormNext,cardform:f,background:d,fontFamily:e,origin:window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")},j=i();j&&"[]"!==decodeURIComponent(j)&&(g.settings=j);var m=document.getElementById("customFieldFrame_"+a);if(f&&m&&"function"==typeof m.up){var n=m.up(".jfField")||!1,o=n&&"function"==typeof n.getAttribute?n.getAttribute("data-widget-id"):!1;o&&(g.widgetID=o)}var p=m.readAttribute("data-width")||m.parentNode.clientWidth,r=m.readAttribute("data-height")||m.parentNode.clientHeight;g.width=parseInt(p),g.height=parseInt(r),g.viewWidth=m.parentNode.clientWidth,g.viewHeight=m.parentNode.clientHeight;var s=JotForm.isEditMode()||!!~window.location.href.indexOf("/edit/")||!!~window.location.href.indexOf("inlineEdit");if(q&&console.log("ready message inline",g),s)var t=50,u=5e3,v=0,w=setInterval(function(){(m.hasAttribute("data-value")||v>=u)&&(clearInterval(w),g.value=m.getAttribute("data-value"),q&&console.log("Ready message sent in",v,g),b(a,g)),v+=t},t);else{if(m.hasAttribute("data-value"))g.value=m.getAttribute("data-value");else{var x=m.parentNode.select("#input_"+a);x.first().getValue()&&(g.state="oldvalue",g.value=x.first().getValue())}q&&console.log("Sending normal ready message",g),b(a,g)}}function o(a){var b=document.createElement("textarea");return b.textContent=a,b.innerHTML}var p=document.getElementById("customFieldFrame_"+a),q=!1,r=void 0==JotForm.forms[0]||"undefined"==typeof JotForm.forms[0]?$($$(".jotform-form")[0].id):JotForm.forms[0];if(~["62754049811963","62261204289958","62702584435962","62802961818967","72134468218962"].indexOf(r.id)&&(q=!0),!p.hasClassName("custom-field-frame-rendered"))return q&&console.log("Not rendered yet for",a),void 0;if(!g(a)){JCFServerCommon.frames[a]={},JCFServerCommon.frames[a].obj=p;var s=p.src;JCFServerCommon.frames[a].src=s,JCFServerCommon.submitFrames=[];var t=!0,u=!1,v=s;window.sendMessage2Widget=h,window.JCFServerCommon.frames[a].sendReadyMessage=n,XD.receiveMessage(function(g){if(d(g.data)){var i=JSON.parse(g.data);if(q&&console.log("Data from widget",i.qid,i),parseInt(a)===parseInt(i.qid))if("submit"===i.type){if(q&&console.log("widget submit",document.getElementById("input_"+i.qid)),document.getElementById("input_"+i.qid)){"number"==typeof i.value&&(i.value=i.value+"");var k=$(document.getElementById("input_"+i.qid)).hasClassName("widget-required")||$(document.getElementById("input_"+i.qid)).hasClassName("validate[required]"),l=document.getElementById("input_"+i.qid),n=l.up(".form-line"),r=function(a){return a.match(/^data:image\/png;base64/gi)||!!~a.indexOf("widget_metadata")||d(a)},s=JotForm.isVisible(n),u=n.hasClassName("form-field-hidden")||l.hasClassName("always-hidden")||!s?!1:!0;if(k)if(q&&console.log(i.qid,"isVisible",u),u&&"valid"in i&&(i.valid===!1||i.valid===!0&&!i.value)){if(m(i.qid)?(l.setValue(""),q&&console.log("LogA: Setting empty input value for",i.qid,i)):q&&console.log("LogA: Setting nothing because isn't ready",i.qid,i),!l.getValue()){var v=JotForm.texts.required||"This field is required";"undefined"!=typeof i.error&&i.error!==!1&&(v=i.error.hasOwnProperty("msg")?i.error.msg:v),q&&console.log("Errored required element",l,i),JotForm.errored(l,v)}}else if(u&&!JotForm.isCollapsed(l)&&(q&&console.log("Correcting required element",l,i),JotForm.corrected(l)),u||i.valid!==!0||(q&&console.log("Correcting not visible element but valid",l,i),JotForm.corrected(l)),m(i.qid))if(void 0!==i.value){var w=i.value;JotForm.isEncrypted&&i.value&&!r(i.value)&&(w=JotEncrypted.encrypt(i.value)),l.setValue(o(w)),q&&console.log("LogB: Setting input value for",i.qid,i)}else l.setValue(""),q&&console.log("LogC: Setting input value for",i.qid,i);else q&&console.log("LogA: Widget frame not ready, no value set",i.qid,i);else if("undefined"!=typeof i)if("value"in i)if(m(i.qid)){var w=i.value;JotForm.isEncrypted&&i.value&&!r(i.value)&&(w=JotEncrypted.encrypt(i.value)),l.setValue(o(w))}else q&&console.log("LogB: Widget frame not ready, no value set",i.qid,i);else l.hasClassName("widget-static")&&(l.setValue(""),l.removeAttribute("name"));l&&n&&n.hasClassName("form-field-hidden")&&"disable"===JotForm.clearFieldOnHide&&(l.setValue(""),l.removeAttribute("name")),JCFServerCommon.submitFrames.indexOf(parseInt(i.qid))<0&&(u&&k&&!i.valid?q&&console.log("Waiting for frame submission, required but not valid",i.qid):JCFServerCommon.submitFrames.push(parseInt(i.qid)))}for(var x=$$(".widget-required, .widget-errored"),y=!0,z=0;z<x.length;z++)0===x[z].value.length&&JotForm.isVisible(x[z])&&(y=!1);if(!t)if(q&&console.log("next page",t,c(),y),c()&&y){q&&console.log("sendSubmit",t,y);var A=void 0==JotForm.forms[0]||"undefined"==typeof JotForm.forms[0]?$($$(".jotform-form")[0].id):JotForm.forms[0],B=!!~window.location.href.indexOf("/edit/")||window.location.search.match("inlineEdit|edit"),C=["stripe","braintree","square","eway","bluepay"];JotForm.payment&&C.indexOf(JotForm.payment)>-1&&JotForm.isPaymentSelected()&&(JotForm.paymentTotal>0||"stripe"==JotForm.payment&&"subscription"==window.paymentType)&&!B||JotForm.isEncrypted||JotForm.disableSubmitButton||($$('.custom-field-frame[data-type="iframe"]').length===JCFServerCommon.submitFrames.length?(q&&console.log("All frames submitted",JCFServerCommon.submitFrames),_submitLast.submit(A,50)):q&&console.log("Not all frames submitted",JCFServerCommon.submitFrames))}else JotForm.enableButtons(),JotForm.showButtonMessage(),JCFServerCommon.submitFrames=[]}else if("data"===i.type){try{var D=document.getElementById("input_"+i.qid);D&&(D.value=i.value,D.triggerEvent("change"))}catch(E){console.log(E)}JotForm.triggerWidgetCondition(i.qid),JotForm.triggerWidgetCalculation(i.qid)}else if("errors"===i.type){var F=document.getElementById("input_"+i.qid);"show"===i.action?JotForm.isVisible(F)&&(JotForm.corrected(F),F.value="",F.addClassName("widget-errored"),JotForm.errored(F,i.msg),"resetForm"in i&&i.resetForm===!0&&JotForm.enableButtons()):"hide"===i.action&&(F.removeClassName("widget-errored"),JotForm.corrected(F))}else if("required"===i.type){var F=document.getElementById("input_"+i.qid);"set"!==i.action||F.hasClassName("widget-required")?"unset"===i.action&&(F.removeClassName("widget-required"),JotForm.corrected(F)):F.addClassName("widget-required")}else if("size"===i.type){var G=i.width,H=i.height;void 0!==G&&null!==G&&(0===Number(G)&&(G="auto"),"number"==typeof G&&(G+="px"),document.getElementById("customFieldFrame_"+i.qid).style.width=G),void 0!==H&&null!==H&&(Number(0===H)&&(H="auto"),"number"==typeof H&&(H+="px"),document.getElementById("customFieldFrame_"+i.qid).style.height=H,void 0!==b()&&(document.getElementById("cid_"+i.qid).style.height=H)),JotForm.iframeHeightCaller()}else if("styles"===i.type)"styles"in i&&!e(i.styles)&&$("customFieldFrame_"+i.qid).setStyle(i.styles);else if("replace"===i.type)try{var I=i.inputType,J=i.isMobile,K=i.required,L=$("customFieldFrame_"+i.qid).up(),M=$("input_"+i.qid).readAttribute("name");$("customFieldFrame_"+i.qid).remove(),$("input_"+i.qid).up().remove();var N="",O=K?"validate[required] widget-required widget-replaced":"";switch(I){case"control_fileupload":var A=void 0==JotForm.forms[0]||"undefined"==typeof JotForm.forms[0]?$($$(".jotform-form")[0].id):JotForm.forms[0];A.setAttribute("enctype","multipart/form-data"),J||(O=""===O?"validate[upload]":O,N='<input class="form-upload '+O+'" type="file" id="input_'+i.qid+'" name="'+M+'" file-accept="pdf, doc, docx, xls, xlsx, csv, txt, rtf, html, zip, mp3, wma, mpg, flv, avi, jpg, jpeg, png, gif"'+'file-maxsize="10240">'),L.insert(N);break;case"control_textbox":N='<input class="form-textbox '+O+'" type="text" data-type-"input-textbox" id="input_'+i.qid+'" name="'+M+'">',L.insert(N);break;case"control_textarea":N='<textarea class="form-textarea '+O+'" type="text" id="input_'+i.qid+'" name="'+M+'" cols="40" rows="6"></textarea>',L.insert(N)}}catch(E){console.log(E)}else if("event:listener"===i.type){var P=document.getElementById(i.field);if(P&&["keyup","change"].indexOf(i.event)>-1){q&&console.log("Event registered from ",i.qid);var Q=function(a){var b=a.target.value;b="undefined"!=typeof b?b:"",q&&console.log("Handler for ",i.qid,"triggered",b,a.target.id),a.target.id===i.field&&(q&&console.log("event:receiver: Sending message to ",i.qid,"with value",b),h(JSON.stringify({eventID:i.eventID,type:"event:receiver",value:b}),i.qid))};Event.observe(P,i.event,"keyup"===i.event?j(Q,100):Q)}}else if("event:store"===i.type){var P=document.getElementById(i.field);if(P){var R=$(i.field).up(".form-line").id.split("_")[1],S={eventID:i.eventID,type:"event:receiver",value:i.value};"widget"===JotForm.getInputType(R)||"isWidget"in i&&i.isWidget?(window.console&&"warn"in console&&console.warn("Sending value to destination(widget) from a source(widget) is not recommended."),delete S.eventID,S.field=i.field,S.isWidget=!0,S.targetQID=R,q&&console.log("Sending data to widget field",R,S),h(JSON.stringify(S),R)):(P.setValue(i.value),"hasCallback"in i&&i.hasCallback&&(q&&console.log("Sending data to native field",i),h(JSON.stringify(S),i.qid)))}}else if("field:hide"===i.type)$("input_"+i.qid).up(".form-line").hide(),window.FORM_MODE&&"cardform"==window.FORM_MODE&&window.CardForm.setCardVisibility(window.CardForm.cards.filter(function(a){return a.question.id==i.qid})[0],!1);else if("field:show"===i.type)$("input_"+i.qid).up(".form-line").show();else if("fields:capture"===i.type){var T=["control_textbox","control_textarea","control_dropdown","control_datetime","control_phone","control_fullname","control_hidden","control_email"],U=[];i.fields.forEach(function(a){var b,c,d="";if(a.match(/\[\w+\]/)){var e=$$('[name$="_'+a+'"]')[0]||!1;e&&(d="SELECT"===e.tagName?e.getSelected().value:e.value,b=e.up("li.form-line"),c=e.up("li.form-line").getAttribute("data-type"))}else{if("name"===i.identifier?$$(".form-textbox, .form-dropdown, .form-textarea, .form-hidden").some(function(c){return c.name.match(new RegExp("("+a+"$)|("+a+"\\[)"))?b=c.up("li"):void 0}):b=$("id_"+a),c=b?b.getAttribute("data-type"):"",!b||-1===T.indexOf(c))return U.push({selector:a,value:""}),void 0;d=$$("#"+b.id+" input, #"+b.id+" select").map(function(a){return a.id=="lite_mode_"+b.id?"":"SELECT"===a.tagName?a.getSelected().value:a.value}).filter(function(a){return!!a}),"control_datetime"===c&&b.down("[id*=lite_mode_]")&&(d=b.down("[id*=lite_mode_]").value),d=d.length<=1?d[0]||"":d}if("object"==typeof d){var f=" ";switch(c){case"control_datetime":f=b.down(".date-separate")?b.down(".date-separate").innerHTML.replace(/\s|\&nbsp;/g,""):"/";break;case"control_phone":f="-"}d=d.join(f)}U.push({selector:a,value:d,type:c||""})}),h(JSON.stringify({eventID:i.eventID,type:"event:receiver",data:U}),i.qid)}else if("fields:fill"===i.type){var V={};$$(".form-line").filter(function(a){return["control_textbox","control_scale","control_radio","control_checkbox","control_dropdown","control_rating","control_datetime","control_fullname","control_phone","control_birthdate","control_address","control_time","control_email","control_textarea","control_emojislider","control_yesno"].include(a.readAttribute("data-type"))}).each(function(a){var b,c=a.id.split("_")[1],d=a.readAttribute("data-type");b=window.FORM_MODE&&"cardform"==window.FORM_MODE?a.select(".jfQuestion-label").first():a.select(".form-label").first();var g=b.clone(!0),h=g.select(".form-required").first()||g.select(".jfRequiredStar").first();h&&h.remove();for(var j=g?g.innerText||g.textContent||"":"",k={name:"",value:"",items:"",text:f(j.toLowerCase()),type:d},l=0;l<i.fields.length;l++){var m=!1;if("label"===i.identifier){var n=(i.fields[l].label||"").toLowerCase();m=k.text===n?!0:!1}else{if("id"!==i.identifier){console.error("Unknown identifier",i.identifier,"use the question label or qid");break}m=Number(c)===Number(i.fields[l].id)?!0:!1}if(m&&$("cid_"+c)){var o=$("cid_"+c).select("input, select, textarea").first();if(o){k.name=o.readAttribute("name").replace("q"+c+"_",""),k.value=i.fields[l].value;var p=widgetAutoFill().generateCtrlItems(d,k.value);e(p)||(k.items=p),c in V||(V[c]={}),V[c]=k}break}}}),e(V)||(q&&console.log("data props",V),widgetAutoFill().parse(V))}else if("fields:clear"===i.type){var W=[];i.fields=i.fields.map(function(a){return a.toLowerCase()}),$$(".form-label, .jfQuestion-label").each(function(a){var b=a.clone(!0),c=b.select(".form-required, .jfRequiredStar").first();c&&c.remove();var d=b.innerText.trim().toLowerCase();if(i.fields.indexOf(d)>-1){var e=a.id.match(/_(\d+)$/)[1]||"",f=a.up(".form-line").getAttribute("data-type")||"";e&&f&&W.push({qid:e,type:f})}});try{widgetAutoFill().clear(W)}catch(E){console.error(E)}}else if("submit:frame:remove"===i.type){if(JCFServerCommon.submitFrames.length>0){var X=JCFServerCommon.submitFrames.indexOf(parseInt(i.qid));X>=0&&JCFServerCommon.submitFrames.splice(X,1)}}else if("frame:move"===i.type){var Y=document.body.getBoundingClientRect().top,Z=p.getBoundingClientRect().top-Y,_=p.up("ul.form-section.page-section");if(_){var ab=_.getHeight(),bb=new MutationObserver(function(){if(JotForm.isVisible(p)&&_.getHeight()!==ab){var a=p.getBoundingClientRect().top-Y;Math.abs(Z-a)>5&&(ab=_.getHeight(),Z=a,h(JSON.stringify({eventID:i.eventID,type:"event:receiver",data:{position:Z}}),i.qid))}});bb.observe(_,{subtree:!0,attributes:!0,attributeFilter:["class","style"]})}}}},p.src.replace(/([^:]+:\/\/[^\/]+).*/,"$1")),p.addClassName("frame-xd-ready").store("frame-xd-ready",!0),q&&console.log("sending settings",i(),(new Date).getTime()),h(JSON.stringify({type:"settings",settings:i()}),a),q&&console.log("sending form strings",JotForm.texts,(new Date).getTime()),h(JSON.stringify({type:"formstrings",formTexts:JotForm.texts}),a);var w=JotForm.getSection(p);if(p&&JotForm.isVisible(w)&&JotForm.isVisible(p)&&"undefined"==typeof p.up(".form-section-closed"))q&&console.log("Frame widget object is visible",JotForm.isVisible(w),JotForm.isVisible(p),"undefined"==typeof p.up(".form-section-closed")),n(a);else if(document.get.jumpToPage){var x=parseInt(document.get.jumpToPage);if(!isNaN(x)&&w===$$(".form-section:not([id^=section_])")[x-1])var y=setInterval(function(){JotForm.isVisible(p)&&(q&&console.log("Form jump to widget page ("+x+"); sending ready message..."),n(a),clearInterval(y))},200)}r.observe("submit",function(b){if(null!==document.getElementById("customFieldFrame_"+a)&&$$(".form-submit-button")&&$$(".form-submit-button").length>0){var c=!1;$$(".form-submit-button").each(function(a){return JotForm.isVisible(a.parentNode)?(c=!0,void 0):void 0}),b.stop(),c?(t=!1,q&&console.log("Form stopped from widget server event, submitting form from widge submit event"),h(JSON.stringify({type:"submit",qid:a+""}),a+"")):JotForm.enableButtons()}}),$$(".form-pagebreak-next").each(function(b){q&&console.log("Going to next page"),$(b).observe("click",function(b){u=this.up(".form-section"),t=!0,u.select("#customFieldFrame_"+a).length>0&&(q&&console.log("Sending submit message for iframe id",a,"from section",this.up(".form-section"),"and iframe",p),h(JSON.stringify({type:"submit",method:"next",qid:a+""}),a+""),Event.stop(b));var c=setInterval(function(){p=document.getElementById("customFieldFrame_"+a),p?(u=$(p).up(".form-section"),JotForm.isVisible(u)&&JotForm.isVisible(p)?(clearInterval(c),q&&console.log("Sending ready message for iframe id",a,"from section",u),n(a)):(q&&console.log("Section and frameObj not visible",u,p),clearInterval(c))):clearInterval(c)},100)})}),$("input_"+a)&&["widget:clear","widget:populate","widget:shift"].forEach(function(b){$("input_"+a).observe(b,function(a){var c=a.memo.qid,d={type:b.replace(":",""),qid:c};"widget:populate"==b&&(d.value=a.memo.value||""),h(JSON.stringify(d),c)})})}}if("object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),window.console||(console={log:function(){}}),void 0===window.getStyle,void 0===window.getIframeWindow,"undefined"==typeof XD)var XD=function(){var a,b,c,d=1,e=this;return{postMessage:function(a,b,c){if(b)if(c=c||parent,e.postMessage){var f=b.replace(/([^:]+:\/\/[^\/]+).*/,"$1");"postMessage"in c||(c=getIframeWindow(c)),0===f.indexOf("file://")&&(f="*"),c.postMessage(a,f)}else b&&(c.location=b.replace(/#.*$/,"")+"#"+ +new Date+d++ +"&"+a)},receiveMessage:function(d,f){e.postMessage?(d&&(c=function(a){var b=e.location.search.split("?").join(""),c=b.indexOf("offline_forms=true")>-1||b.indexOf("offline_forms=si")>-1;return!c&&("string"==typeof f&&a.origin!==f||"[object Function]"===Object.prototype.toString.call(f)&&f(a.origin)===!1)?!1:(d(a),void 0)}),e.addEventListener?e[d?"addEventListener":"removeEventListener"]("message",c,!1):e[d?"attachEvent":"detachEvent"]("onmessage",c)):(a&&clearInterval(a),a=null,d&&(a=setInterval(function(){var a=document.location.hash,c=/^#?\d+&/;a!==b&&c.test(a)&&(b=a,d({data:a.replace(c,"")}))},100)))}}}();void 0===window.JCFServerCommon&&(window.JCFServerCommon={frames:{},func:{}});var _submitLast={t:null,submitted:!1,submit:function(a,b){this.submitted!==!0&&(null!==this.t&&clearTimeout(this.t),this.t=setTimeout(function(){this.submitted=!0,a.submit(),JotForm.disableButtons()},b))}};